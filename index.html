<!DOCTYPE html>
<html lang="en-us">

<html>

<head>
    <!-- For media queries-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <meta charset="UTF-8">
    <title>NJIB Word Guess Game</title>

    <!-- Link html to CSS reset -->
    <link rel="stylesheet" type="text/css" href="assets/css/reset.css">
    ​
    <!-- Link html to the Bootstrap CDN -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    
    <!-- Link html to the CSS stylesheet -->
    <link rel="stylesheet" type="text/css" href="assets/css/style.css">

</head onload="startGame()">

<body>

    <header>
        <!--ACTION:  Put into a container to wrap on page resizing-->
        <h1 id="topBanner">Premier League Word Guess Game</h1>
    </header>

    <!--Creating a div on the browser, to display the scoreboard-->
    <!-- <div class="container"> -->
        <div id="scoreBoard" class="scoreBoard-container">
            <div>
                Player Score:
            </div>
            <div id="playerScore">
            </div>
            <!--Scoreboard Center-->
            <div></div>
            <div>
                    Computer Score:
                </div>
                <div id="computerScore">
                </div>    
        </div>
    <!-- </div> -->

    <!--Creating a div on the browser, to display the scoreboard-->
    <div class="game-container">
        <div class="letter-container">
            <div></div>
            <div id=letterContainer></div> 
            <div></div>
        </div>
    </div>

    <!--Link to game script-->
    <!-- <script src="../assets/javascript/game.js"></script> -->

    <!-- THIS SCRIPT WILL GET MOVED INTO THE GAME.JS FILE-->
    <script type="text/javascript">
        //INSERT ANY-KEY PRESS TO START THE GAME
        // var wannaPlay = confirm("Do you like soccer? Let's play a game!");
        // listofTeams is the array containing all 20 possible answers
        var listofTeams = ["Arsenal", "Aston Villa", "Bournemouth", "Brighton Hove Albion", "Burnley", "Chelsea", "Crystal Palace", "Everton", "Leicester City", "Liverpool", "Manchester City", "Manchester United", "Newcastle United", "Norwich City", "Sheffield United", "Southampton", "Tottenham Hotspur", "Watford", "West Ham United", "Wolverhampton Wanderers"];
        // chosenTeam is the team the computer randomly selects
        var chosenTeam = [];
        // chosenTeam is the lower case of chosenTeam - used for search, not for display
        var chosenTeamLowerCase = [];
        // blankDisplay is how the blanks are shown on the screen
        var blankDisplay = [];
        //teamNameLength counts the length of the chosenTeam
        var teamNameLength = 0;
        //letterGuessed captures the key the player hits to guess a letter
        var letterGuessed = [];
        //Guess counter
        var guessCounter = 0;
        //Guesses remaining
        var guessesRemaining = 10;
        //letterPosition identifies the position in the chosenTeam string of the guessed letter
        var letterPosition = [];
        //occurrenceCount stores the number of occurrences in the chosenTeam string
        var occurrenceCount = 0;
        //totalGuessed counts total number of letters guessed
        var totalGuessed = 0;
        //playerOutcome prints out how far the player got [by the end of the game]
        var playerOutcome = [];
        //incorrectGuesses logs incorrectly guessed letters - to display, but also count guessesRemaining
        var incorrectGuesses = [];


        // Computer randomly chooses a team - WORKING
        function chooseTeam() {
            chosenTeam = listofTeams[Math.floor(Math.random() * listofTeams.length)];
            chosenTeamLowerCase = chosenTeam.toLowerCase();
            console.log(chosenTeam);
        }

        // Computer calculates length of string for team chosen, and displays placeholders
        function chosenTeamLengthCount() {
            teamNameLength = chosenTeam.length;
            console.log(teamNameLength);
        }

        function displayPlaceholders() {
            // blankDisplay populated with the same number of "_" as the length of chosenTeam
            for (var blankCount = 0; blankCount < teamNameLength; blankCount++) {
                blankDisplay.push(" _ ");
                if (blankDisplay.length === teamNameLength) {
                    console.log(blankDisplay);
              }
            }
        }

        function playerGuesses() {
            // Senses which key the player has selected
            document.onkeyup = function (event) {
                letterGuessed = event.key.toLowerCase();
                // console.log(letterGuessed);

                //guessCounter incremented by for each guess
                guessCounter++;
                console.log("guessCounter: " + guessCounter);
                //If guess correct, move on to log guess, otherwise log as incorrect, decrement guessesRemaining
                if(chosenTeamLowerCase.indexOf(letterGuessed)> -1) {
                    checkWinLose();
                    locateGuessinString();
                } else
                incorrectGuesses.push (letterGuessed);
                console.log("incorrectGuesses: " + incorrectGuesses);
                guessesRemaining = (10-incorrectGuesses.length);
                console.log("guessesRemaining: " + guessesRemaining);
                checkWinLose();
                displayScore();
            }
        }
        
            function locateGuessinString() {
                // Determines which position in the array the letter sits 
                for (var stringLocation = 0; stringLocation < teamNameLength; stringLocation++) {
                    if (chosenTeamLowerCase[stringLocation] === letterGuessed) {
                        letterPosition.push (stringLocation);
                    }  
                }
                replacePlaceholders();

                //Clears the letterPosition array - and therefore the occurrenceCount
                letterPosition = [];
            }

        function replacePlaceholders() {
            // Replace blanks with letters guessed
        occurrenceCount = letterPosition.length;
            console.log("occurrenceCount: " + occurrenceCount);
            totalGuessed += occurrenceCount;
            // console.log("totalGuessed: " + totalGuessed);    
            // console.log("guessCounter: " + guessCounter);
            // console.log("guessesRemaining: " + guessesRemaining);
            for (var stringLocation = 0; stringLocation <  occurrenceCount; stringLocation++) {
            blankDisplay[letterPosition[stringLocation]] = chosenTeam[letterPosition[stringLocation]];
            //Log latest to playerOutcome
            playerOutcome = [];
            playerOutcome = playerOutcome.toString() + blankDisplay.toString();
            }
            // console.log(blankDisplay);
            displayPuzzleStatus();
        }


        function checkWinLose() {
            if ((totalGuessed >= teamNameLength && guessesRemaining >0)) {
            //     document.write("Goooooaaaaallll - you win!  <br />" + blankDisplay);
                alert("Goooooaaaaallll - you win!" + "\n \n" + blankDisplay.toString());
            } else
            
            if ((totalGuessed < teamNameLength) && (guessesRemaining <1)) {
               alert("Loser...! You guessed:  " + playerOutcome  + "\n \n" + "The correct answer was:  " + chosenTeam);
            } 

        }

            function displayScore() {
                //scoreBoardDiv1 "grabs" the div with the matching id (playerScore); 
                var scoreboardDiv1 = document.getElementById("playerScore");
                // We create a new element to hold the playerScore
                var contentBlock1 = document.createElement("int");
                // We then assign the text of this element to be the text in the div
                contentBlock1.textContent = totalGuessed;
                // We then add the element to the our main div on the page (playerScore)
                playerScore.append(contentBlock1);

            // function displayComputerScore() {
                //scoreBoardDiv2 "grabs" the div with the matching id (computerScore); 
                var scoreboardDiv2 = document.getElementById("computerScore");
                // We create a new element to hold the playerScore
                var contentBlock2 = document.createElement("int");
                // We then assign the text of this element to be the text in the div
                contentBlock2.textContent = incorrectGuesses.length;
                // We then add the element to the our main div on the page (computerScore)
                computerScore.append(contentBlock2);
            }

            function displayPuzzleStatus() {
                    var gameareaDiv = document.getElementById("letterContainer");
                    // var contentBlock3 = document.createElement("p");
                    var contentBlock3 = document.createTextNode(blankDisplay);
                    contentBlock3.textContent = playerOutcome;
                    letterContainer.append(contentBlock3);
            }


        //FUNCTION CALLS FOR PROGRAM EXECUTION        
        chooseTeam();
        chosenTeamLengthCount();
        displayPlaceholders();
        playerGuesses();
        replacePlaceholders();



    </script>

<footer class="footer mt-auto py-3">
        <div class="container">
          <span class="text-muted">Copyright &copy</span>
        </div>
      </footer>

    <!-- <footer>
        Copyright &copy;
    </footer> -->
    


    <!-- jQuery, javascript file for the Bootstrap's javascript file to function -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    ​
    <!-- Bootstrap's javascript file that allows the dropdown menu to work  -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    ​
</body>

</html>